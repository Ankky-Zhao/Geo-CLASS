/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var roi = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Point([108.17175224217853, -2.7173442156266616]),
    potong = 
    /* color: #98ff00 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[108.05433586034259, -2.675848164006746],
          [108.05433586034259, -2.7993032793444375],
          [108.25208976659259, -2.7993032793444375],
          [108.25208976659259, -2.675848164006746]]], null, false),
    Mangrove = /* color: #0b4a8b */ee.Geometry.MultiPoint(
        [[108.22800238884044, -2.7173519466872844],
         [108.22451107533865, -2.7145781427085955],
         [108.2219790700286, -2.7126062504941597],
         [108.22044021225194, -2.709617714385618],
         [108.21803678201832, -2.705572792562415],
         [108.21537603067554, -2.7025934972355996],
         [108.21009744333423, -2.701264600558297],
         [108.20261852042822, -2.691428898116032],
         [108.20098773734716, -2.694772597900312],
         [108.20566550986914, -2.698244891801224],
         [108.20467845695165, -2.7012027639691882],
         [108.20673839347509, -2.702831733971383],
         [108.2129535178371, -2.704030860377843],
         [108.20179552833514, -2.698886742217008],
         [108.19561863404924, -2.6920907926239],
         [108.1979360626381, -2.694277057718354],
         [108.1915416763466, -2.6920479246416593],
         [108.1906404541176, -2.695906037001344],
         [108.19577765067746, -2.68323985638737],
         [108.19251608451535, -2.682339621916386],
         [108.19148611625363, -2.684525904481665],
         [108.18942617973019, -2.6861548967913547],
         [108.18831038078, -2.6796389145282884],
         [108.18298887809445, -2.683454197830379],
         [108.18590712150265, -2.6801533354427014],
         [108.1813580950134, -2.6804962825988614],
         [108.17749571403195, -2.6807106245226433],
         [108.17415581172295, -2.6789138943717354]]),
    BadanAir = /* color: #ffc82d */ee.Geometry.MultiPoint(
        [[108.20388766901452, -2.6833614640543586],
         [108.21392985956628, -2.689963162581423],
         [108.21513148920495, -2.6951073184826937],
         [108.23049518244225, -2.703080717149193],
         [108.22577449457604, -2.6918493556002945],
         [108.21856471674401, -2.6808751008171057],
         [108.23847743647057, -2.68653371325607],
         [108.22216960566003, -2.682847044488972],
         [108.24058395756713, -2.7053187245984534],
         [108.24590546025267, -2.7162927587101273],
         [108.2366357458972, -2.715349681564576],
         [108.24787956608763, -2.7276953603838963],
         [108.24899536503783, -2.701717847994775]]),
    LahanTerbuka = /* color: #00ffff */ee.Geometry.MultiPoint(
        [[108.17780497528815, -2.6899072165190074],
         [108.17621710755134, -2.6925221652697853],
         [108.18488600708747, -2.6911075215601286],
         [108.1816673562696, -2.689735744273821],
         [108.18540099121833, -2.695179976281558],
         [108.19278243042731, -2.699766830018479],
         [108.18900588013435, -2.6995953591621014],
         [108.19874591643352, -2.7161704101489046],
         [108.1550231459758, -2.6990982352294535],
         [108.15647121645414, -2.68747219840542],
         [108.15767284609281, -2.6899156801577697],
         [108.16209312654935, -2.69028005859621],
         [108.15805908419095, -2.685285921112241],
         [108.15057035662137, -2.684792936475997],
         [108.14385410524808, -2.6874078961879713],
         [108.12751613087256, -2.724373423617465],
         [108.12236628956397, -2.7181148488726596],
         [108.12966189808448, -2.721029805536088],
         [108.13172183460792, -2.7261738295084594]]),
    LahanTerbangun = /* color: #bf04c2 */ee.Geometry.MultiPoint(
        [[108.2386947255087, -2.766911450135932],
         [108.23873764085293, -2.767972366151627],
         [108.2369137387228, -2.769161876918577],
         [108.23668843316555, -2.7698048552142156],
         [108.23584973569213, -2.7697512737029135],
         [108.23630034680663, -2.7700834790339157],
         [108.23560976489864, -2.7730149604417558],
         [108.23407554134212, -2.7738401131714117],
         [108.23322796329342, -2.7746224002925257],
         [108.23362493022762, -2.774943888000456],
         [108.23530935748897, -2.7746759815832496],
         [108.2357277820953, -2.7739687083501585],
         [108.23243301322366, -2.7769432434350283],
         [108.23189657142068, -2.7778862719446566],
         [108.22392634450182, -2.7814279227213534],
         [108.22333625851854, -2.7809456937746866],
         [108.22122843578595, -2.7857091610496223],
         [108.22197945431012, -2.786459291849108],
         [108.22295577839154, -2.786684330995755],
         [108.21892173603314, -2.784680409461861],
         [108.21658284977215, -2.787380880462674],
         [108.21535816941842, -2.7905885682896927],
         [108.21693530831918, -2.7909207677534242],
         [108.21402779374704, -2.7906421488547033],
         [108.21455350671395, -2.7916494630223627],
         [108.21380248818978, -2.792646060232056],
         [108.2144891336976, -2.7924960348997065],
         [108.21285835061654, -2.7902563687320847],
         [108.22056165490731, -2.790459974923697],
         [108.22192421708688, -2.7909529160836417],
         [108.2270848660853, -2.7927361936032606],
         [108.22699903539683, -2.7944936316485767],
         [108.22669862798716, -2.7958009923902596],
         [108.22496055654551, -2.795543806785659],
         [108.22837232641245, -2.795929585171415],
         [108.23103307775523, -2.7964225240352665],
         [108.22541116766001, -2.797065487459407],
         [108.223608723202, -2.7951580282730752],
         [108.2296597867396, -2.7901000316053173]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
//Menentukan citra satelit Landsat 8 yang digunakan
var image = ee.Image(ee.ImageCollection('LANDSAT/LC08/C01/T1_SR')
    .filterBounds(roi)
    .filterDate('2021-01-01', '2021-04-30')
    .sort('CLOUD_COVER')
    .first());
    
    //Menampilkan citra satelit Landsat 8 dan memotong berdasarkan kawasan yang diinginkan
Map.addLayer(image.clip(potong), {bands: ['B5', 'B6', 'B3'],min:0, max: 3000}, 'True colour image');

//Membangun empat kelas penutup lahan (FeatureCollection)
var classNames = Mangrove.merge(BadanAir).merge(LahanTerbuka).merge(LahanTerbangun);

//Mencetak FeatureCollection pada console
print(classNames);

// Memilih band yang digunakan dalam klasifikasi
var bands = ['B2', 'B3', 'B4', 'B5', 'B6', 'B7'];

// Membangun sampel-sampel (training area atau region of interest atau area of interest) kelas penutup lahan (25 sampel per kelas)
var training = image.select(bands).sampleRegions({
  collection: classNames,
  properties: ['TutupanLahan'],
  });
  
  //Mencetak training area pada console
print(training);

//Memilihi Random Forest sebagai algoritma klasifikasi
var classifier = ee.Classifier.smileRandomForest(100).train({
  features: training,
  classProperty: 'TutupanLahan',
  inputProperties: bands
});

//Proses klasifikasi penutupan lahan
var classified = image.select(bands).classify(classifier);

//Memusatkan penyajian berdasarkan sebaran taining area
Map.centerObject(classNames, 13);

//Menyajikan hasil klasifikasi dan memotongnya
Map.addLayer(classified.clip(potong),
{min: 0, max: 7, palette: ['151B54', '008000', 'FFA500','438D80', '00FFFF', 'FFFF00', 'FF00FF', 'F660AB']},
'classification');

