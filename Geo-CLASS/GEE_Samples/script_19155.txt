/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var punto = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Point([-69.59018202548465, -35.45201055618922]),
    cultivado = /* color: #52ff02 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.57601430894341, -35.37137710273867],
                  [-69.57661512610746, -35.37330175206243],
                  [-69.57519891422102, -35.37135960571607],
                  [-69.57612159772263, -35.369189945521924]]]),
            {
              "clase": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.57844559051746, -35.36921469089833],
                  [-69.57870308258289, -35.37129685715975],
                  [-69.57896057464832, -35.37250413904485],
                  [-69.5780378947472, -35.371419335855286],
                  [-69.5780378947472, -35.36924968573308]]]),
            {
              "clase": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59785350215789, -35.35908607636524],
                  [-69.59738143337127, -35.35913857519792],
                  [-69.59669478786346, -35.35712609552086],
                  [-69.59684499156829, -35.354781055930566]]]),
            {
              "clase": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59301489610337, -35.37572523553577],
                  [-69.59185618180894, -35.37467546812617],
                  [-69.59200638551377, -35.373083294826074]]]),
            {
              "clase": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.56716458210194, -35.39057598305335],
                  [-69.566456478922, -35.39225527333629],
                  [-69.5660595119878, -35.39118822835258]]]),
            {
              "clase": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58042255565566, -35.4438960493243],
                  [-69.58018652126235, -35.44651818913584],
                  [-69.5794569604103, -35.44520712990803]]]),
            {
              "clase": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59356592245406, -35.52196623922845],
                  [-69.59263251371688, -35.5221234172833],
                  [-69.59312067575759, -35.521774132298944]]]),
            {
              "clase": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.60908081510787, -35.515366600310806],
                  [-69.6086892125917, -35.51543646300578],
                  [-69.60881795862441, -35.51511771396584],
                  [-69.60865166166549, -35.51463740480303],
                  [-69.60888233164077, -35.51465923710004]]]),
            {
              "clase": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.60037206453852, -35.49595674494404],
                  [-69.60059737009577, -35.49656818922684],
                  [-69.60021113199763, -35.496428430943915]]]),
            {
              "clase": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58338755702943, -35.43917206966594],
                  [-69.58321589565247, -35.4415671012901],
                  [-69.58218592739075, -35.44008114115416]]]),
            {
              "clase": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.56258179983779, -35.39052379583381],
                  [-69.5619166120021, -35.39251795044238],
                  [-69.56157328924819, -35.39206314759145],
                  [-69.56202390036269, -35.39052379583381]]]),
            {
              "clase": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.56374317979513, -35.36677393413852],
                  [-69.56378609513936, -35.36819125566653],
                  [-69.56423670625387, -35.36915362029584],
                  [-69.56288487291036, -35.368261246208284]]]),
            {
              "clase": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59063137655868, -35.4989241867307],
                  [-69.59025586729659, -35.499308509483406],
                  [-69.5902022231163, -35.49898532910981]]]),
            {
              "clase": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.61414009509394, -35.50511359729807],
                  [-69.61368948397944, -35.50485594518721],
                  [-69.61449414668391, -35.50486904616195]]]),
            {
              "clase": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.61893804043437, -35.53907482405591],
                  [-69.6183479544511, -35.5388565672351],
                  [-69.61917407482768, -35.53881291579967]]]),
            {
              "clase": 1,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.50746876101796, -35.604167621720265],
                  [-69.50734001498525, -35.60552842473946],
                  [-69.50641733508412, -35.604725902681636]]]),
            {
              "clase": 1,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.50017315249745, -35.609889816915725],
                  [-69.50017315249745, -35.61123307781478],
                  [-69.49967962603871, -35.610552727710754]]]),
            {
              "clase": 1,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.50515110018667, -35.595810854070784],
                  [-69.50523693087514, -35.59727648632355],
                  [-69.50431425097402, -35.596613465533466]]]),
            {
              "clase": 1,
              "system:index": "17"
            })]),
    nocultivado = /* color: #0b4a8b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.57517790255966, -35.34396344727209],
                  [-69.57221674380722, -35.34294827307389],
                  [-69.57620787082138, -35.34196809277883]]]),
            {
              "clase": 2,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.61131287471721, -35.36709728816782],
                  [-69.61199952022503, -35.37129667016721],
                  [-69.60993958370159, -35.36870707709099]]]),
            {
              "clase": 2,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.60368161174647, -35.41965900833278],
                  [-69.6033812043368, -35.42173987246302],
                  [-69.60211520168177, -35.41997376434038]]]),
            {
              "clase": 2,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58031702660962, -35.42361692531241],
                  [-69.5802955689375, -35.42571517237408],
                  [-69.57922268533154, -35.42454365783718]]]),
            {
              "clase": 2,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.52842084011911, -35.45128272792138],
                  [-69.52704754910349, -35.45082825671442],
                  [-69.52960101208566, -35.45086321612915]]]),
            {
              "clase": 2,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.52160773376578, -35.45315350606794],
                  [-69.52130732635611, -35.45556560035055],
                  [-69.52047047714346, -35.453922587459566]]]),
            {
              "clase": 2,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58708590613888, -35.515981809748176],
                  [-69.5865494643359, -35.516252525277956],
                  [-69.58551949607418, -35.515894481963194],
                  [-69.58691424476193, -35.51570236050183]]]),
            {
              "clase": 2,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.5853332880004, -35.51190056664338],
                  [-69.58461445598441, -35.51167350266237],
                  [-69.58545130519705, -35.51145517130583]]]),
            {
              "clase": 2,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.57147051427312, -35.51678063825783],
                  [-69.57196404073186, -35.51830011138917],
                  [-69.57080532643742, -35.51760150662484]]]),
            {
              "clase": 2,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.60546077101816, -35.53997111279278],
                  [-69.60421622603525, -35.53941238038915],
                  [-69.60616887419809, -35.53925523619936]]]),
            {
              "clase": 2,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.60747831256775, -35.48172174301395],
                  [-69.60760705860046, -35.48304967989834],
                  [-69.60641615779785, -35.48215856677892]]]),
            {
              "clase": 2,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.5447470983676, -35.36757439578842],
                  [-69.54416774122038, -35.36622705573483],
                  [-69.54757951108732, -35.36657701635231]]]),
            {
              "clase": 2,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.56433431763247, -35.454471127988384],
                  [-69.5620168890436, -35.45361465635782],
                  [-69.56497804779605, -35.45387684251908]]]),
            {
              "clase": 2,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.54716528674155, -35.474918330280644],
                  [-69.54480494280844, -35.47348541040772],
                  [-69.54905356188803, -35.473590259069226]]]),
            {
              "clase": 2,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59917556375143, -35.529745475323374],
                  [-69.59754478067038, -35.529221597036994],
                  [-69.60061322778341, -35.52918667169628]]]),
            {
              "clase": 2,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.51499052190134, -35.591509663614424],
                  [-69.51256580495188, -35.5903754640599],
                  [-69.51602049016306, -35.58985198192283]]]),
            {
              "clase": 2,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.53407599785906, -35.59152794614257],
                  [-69.53278853753191, -35.58908503538534],
                  [-69.53639342644793, -35.58915483387001]]]),
            {
              "clase": 2,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.47842330744164, -35.60652335118062],
                  [-69.47765083124536, -35.60858193231479],
                  [-69.47662086298364, -35.60750031154295]]]),
            {
              "clase": 2,
              "system:index": "17"
            })]),
    area_estudio = 
    /* color: #46a3a5 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-69.51737493276048, -35.46103661360123],
          [-69.52057252808035, -35.40458425596639],
          [-69.51421841804785, -35.361113563513214],
          [-69.63073173326562, -35.31915083128097],
          [-69.61760055012897, -35.504806168549756],
          [-69.61691390462116, -35.51891905493593],
          [-69.62588507323461, -35.53376423207018],
          [-69.62484771872639, -35.542693060565156],
          [-69.600643464576, -35.54415966483092],
          [-69.57437927390217, -35.55372685345251],
          [-69.54124862815021, -35.555961360781296],
          [-69.54463144631569, -35.59736092424957],
          [-69.47201868386452, -35.62373768725468]]]),
    urbano = /* color: #f15845 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.5796043264591, -35.47042458159582],
                  [-69.57958018657797, -35.4708046718115],
                  [-69.57936024543875, -35.470806856232834],
                  [-69.5793656104761, -35.470664868804974],
                  [-69.5793870675289, -35.470433319322105],
                  [-69.57951179015289, -35.47042676632213]]]),
            {
              "clase": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.5855105507099, -35.47535250847757],
                  [-69.5860429686154, -35.47537435224974],
                  [-69.58606576797598, -35.47549230341612],
                  [-69.58549713966482, -35.47547046047299]]]),
            {
              "clase": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58678181883431, -35.47839577672072],
                  [-69.58669598814583, -35.4783935925056],
                  [-69.58671476692452, -35.478118381609534],
                  [-69.58684619185067, -35.4781096440294],
                  [-69.58683814522362, -35.47840232936585]]]),
            {
              "clase": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.57912873852842, -35.47075357488434],
                  [-69.57899462807768, -35.47075357488434],
                  [-69.57901072133177, -35.47055479216818],
                  [-69.57913946736448, -35.4705569765963]]]),
            {
              "clase": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58598120243526, -35.47153550844346],
                  [-69.58597583801723, -35.47167312562088],
                  [-69.58565397293545, -35.47166875682521],
                  [-69.58565665514446, -35.47153113964033]]]),
            {
              "clase": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58614970364212, -35.474783160937854],
                  [-69.58613629259705, -35.475185073577244],
                  [-69.58596999563812, -35.475185073577244],
                  [-69.5859646312201, -35.474783160937854]]]),
            {
              "clase": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59246181390665, -35.488780998108695],
                  [-69.59245913169764, -35.48890766611853],
                  [-69.5922365083494, -35.48889893040013],
                  [-69.59224723718546, -35.48878318204159]]]),
            {
              "clase": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.5814457496273, -35.4993326575871],
                  [-69.58146452509041, -35.49980432376506],
                  [-69.58138674102898, -35.49979558923138],
                  [-69.58137601219292, -35.49932610664845]]]),
            {
              "clase": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58081274829979, -35.49968422384368],
                  [-69.58053916298027, -35.49969295838947],
                  [-69.58054989181633, -35.49963618382485],
                  [-69.58081811271782, -35.49963618382485]]]),
            {
              "clase": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.58109438024636, -35.49888719254265],
                  [-69.58051770530815, -35.498895927175106],
                  [-69.58050965868111, -35.498832601068266],
                  [-69.58108901582833, -35.49881731544878]]]),
            {
              "clase": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59698305313283, -35.48705262138348],
                  [-69.59692136232549, -35.48695434222802],
                  [-69.59720835869008, -35.48684514302545],
                  [-69.59725395624334, -35.48695215824543]]]),
            {
              "clase": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59142513620479, -35.475073372645625],
                  [-69.59138758527858, -35.47579419019567],
                  [-69.591103271123, -35.47578545305194],
                  [-69.59110863554103, -35.475130164565904]]]),
            {
              "clase": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59008403169734, -35.475593235649605],
                  [-69.58966560709102, -35.475584498484025],
                  [-69.58966560709102, -35.475191325050595],
                  [-69.58975680219753, -35.47520443086268],
                  [-69.58978362428768, -35.47540101778769],
                  [-69.5900572096072, -35.47540101778769]]]),
            {
              "clase": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.59053514854578, -35.46635112201592],
                  [-69.59050027982859, -35.466650403759566],
                  [-69.58970634596018, -35.46661326666942],
                  [-69.58971975700526, -35.46633583021809]]]),
            {
              "clase": 3,
              "system:index": "13"
            })]),
    suelo_desnudo = /* color: #ffa52b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.60592265762146, -35.323797804663066],
                  [-69.60487123168762, -35.32355270263506],
                  [-69.6049570623761, -35.32298371291979],
                  [-69.60598703063782, -35.32315003340457]]]),
            {
              "clase": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.5936470277314, -35.334573190272536],
                  [-69.59360143017814, -35.334619140694365],
                  [-69.59307839942024, -35.334367507111736],
                  [-69.59314009022758, -35.33431499217829]]]),
            {
              "clase": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.57411414521691, -35.34711209703915],
                  [-69.57329338925835, -35.34717335475541],
                  [-69.57329338925835, -35.34713616257607],
                  [-69.57399344581124, -35.34709021927209]]]),
            {
              "clase": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.62402394376625, -35.36211563984946],
                  [-69.62365916334022, -35.362141888285144],
                  [-69.62329974733223, -35.36154254687646],
                  [-69.62347140870918, -35.361485674832835]]]),
            {
              "clase": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.62101514600016, -35.36799254979144],
                  [-69.62093736193873, -35.368014421896106],
                  [-69.62043042443491, -35.367727896855335],
                  [-69.62062354348399, -35.36777382841888]]]),
            {
              "clase": 4,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.65368392903953, -35.48112164173686],
                  [-69.6536061449781, -35.4811631404064],
                  [-69.6529758258596, -35.48079620405926],
                  [-69.65305360992103, -35.480774362557206]]]),
            {
              "clase": 4,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.51534230503708, -35.58532091652069],
                  [-69.5148246386972, -35.58544306957145],
                  [-69.51473612579971, -35.585440888268614],
                  [-69.51543081793457, -35.58526202123322]]]),
            {
              "clase": 4,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.63676984231026, -35.307059312412235],
                  [-69.63596249739678, -35.307061501272834],
                  [-69.63531340281517, -35.30710090075333],
                  [-69.63516588131935, -35.30701115746427],
                  [-69.6366142741874, -35.30699802429165]]]),
            {
              "clase": 4,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.63627962873583, -35.309561524821305],
                  [-69.63583438203936, -35.30984606740017],
                  [-69.6357861022771, -35.309811046829076],
                  [-69.63615892933016, -35.309587790332046]]]),
            {
              "clase": 4,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.6180474534481, -35.367423161201074],
                  [-69.61799917368583, -35.367490965184516],
                  [-69.61749223618202, -35.3673444210198]]]),
            {
              "clase": 4,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.60708518496911, -35.3903407871431],
                  [-69.60704226962487, -35.390356093376866],
                  [-69.60685451499383, -35.38998218312087],
                  [-69.60687597266595, -35.38991658465161]]]),
            {
              "clase": 4,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.57524761293574, -35.46633530987651],
                  [-69.5752583417718, -35.46696008668166],
                  [-69.57475945089503, -35.46692513426128],
                  [-69.57468434904261, -35.466300357184615]]]),
            {
              "clase": 4,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.55921359062842, -35.47498374703566],
                  [-69.55914653540304, -35.47500777441824],
                  [-69.55867446661642, -35.47458838634584],
                  [-69.55877639055899, -35.47455999019937]]]),
            {
              "clase": 4,
              "system:index": "12"
            })]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// creamos un punto para darle ubicacion a la imagen. las coordenadas se toman con el inspector



// definimos las bandas a utilizar

// var bandas =['B2','B3','B4','B8','B11','B12'];



// creamos una coleccion de imagenes con los filtros necesarios (area,fecha,metadata y bandas)

var imagen = ee.ImageCollection('COPERNICUS/S2')

.filterBounds(punto)

  .filterDate('2020-01-01','2020-12-31')

  .filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 20)

  .select(bandas)

  .sort('CLOUDY_PIXEL_PERCENTAGE');

  



print(imagen)



// traemos la imagen seleccionada en la consola copiando el ID y definiendo bandas

var img=ee.Image('COPERNICUS/S2/20200131T142651_20200131T143550_T19HDA');

  // .select(['B2','B3','B4','B8','B11','B12']);



Map.addLayer(img,{bands: ['B8', 'B4', 'B3'], min: [418, 418, 418], 

max: [4300, 4300, 4300]},'Infrarrojo');

// Map.addLayer(img,{bands: ['B4', 'B3', 'B2'], min: [500, 500, 500], 

// max: [4300, 4300, 4300]},'Color verdadero');

//Map.addLayer (punto,[],'Punto');



Map.centerObject(punto, 12)

Map.setOptions("SATELLITE")

var muestras= cultivado.merge(nocultivado).merge(urbano).merge(suelo_desnudo);

var entrenamiento= img.sampleRegions(muestras,['clase'],10);

print (entrenamiento.size())



var bandas= ['B2','B3','B4','B5','B6','B7','B8','B11','B12'];



var clasificacion=ee.Classifier.smileRandomForest(10).train(entrenamiento,'clase',bandas);

var imagen= img.classify(clasificacion).clip(area_estudio)



Map.addLayer(imagen,{min:1,max:4,palette:['green','blue','red','orange']},'clasificado');





